var wineobsApp=angular.module("wineobsApp",["ngRoute","mm.foundation","pascalprecht.translate","ngCookies"]);wineobsApp.config(function(e){e.translations("es",{INICIO:"Inicio",TITULO_DATOS:"Recorrer. Conocer. Disfrutar.",TITULO_FOOTER_TRANSPORTE:"*El servicio de transporte no está incluido",PRECIO_TOTAL:"Precio Total",MENU_ITEM1:"Inicio",MENU_ITEM2:"Mis Reservas",MENU_ITEM3:"Contacto",TITULO_PASO1:"ELIJA UNA FECHA",TITULO_PASO2:"ELIJA EL IDIOMA",TITULO_PASO3:"INDIQUE LA CANTIDAD DE PERSONAS",TITULO_PASO4:"SELECCIONE LAS BODEGAS",TITULO_PASO5:"CONFIRME SU RESERVA",TITULO_IMAGENES:"IMÁGENES",INFOBOX_DISTANCIA:"Por favor, tenga en cuenta la distancia entre bodegas y el medio de transporte utilizado.",INFOBOX_RECOMENDACION:"Se recomienda no realizar más de 4 reservas por día.",INFOBOX_PAGOS:"A continuación será redireccionado a (medio de pago) para finalizar su compra. Muchas gracias!.",TITULO_BODEGA:"HISTORIA",BOTON_CONTINUAR:"CONTINUAR",CONTENIDO_PASO1:"dd.mm.aa",CONTENIDO_PASO2a:"español",CONTENIDO_PASO2b:"inglés",CONTENIDO_PASO3a:"adultos",CONTENIDO_PASO3b:"menores",INFOBOX_MENORES:"Los menores de 18 años no podrán participar de la degustación",BOTON_ATRAS:"ANTERIOR",BOTON_ADELANTE:"SIGUIENTE",BOTON_CONFIRMAR:"CONFIRMAR",INFO_BODEGA_TITULO1:"Bodega",INFO_BODEGA_TITULO2:"Tours",INFO_BODEGA_TITULO3:"Comentarios","INFO_BODEGA_DURACIÓN":"DURACIÓN",INFO_BODEGA_HORARIO:"SELECCIONE HORARIO",INFO_BODEGA_RESERVA:"RESERVAR",INFO_DATOS_PERSONALES:"DATOS PERSONALES",INFO_DATOS_PERSONALESa:"Nombre y Apellido",INFO_DATOS_PERSONALESb:"Fecha de Nacimiento",INFO_DATOS_PERSONALESc:"País de Origen",INFO_DATOS_PERSONALESd:"Teléfono",INFO_DATOS_PERSONALESe:"Email",INFO_DATOS_PERSONALESf:"Método de Pago",INFO_TOUR_RESERVADOa:"Cupos Reservados",INFO_TOUR_RESERVADOb:"Idioma del Tour",INFO_TOUR_RESERVADOc:"Duración",INFO_TOUR_VISTA_RESERVASa:"Idioma:",INFO_TOUR_VISTA_RESERVASb:"Cupos y Precios:",INFO_TOUR_VISTA_RESERVASc:"Subtotal:",TITULO_CONTACTO:"CONTACTO",INFO_CONTACTOa:"Nombre y Apellido",INFO_CONTACTOb:"E-Mail",INFO_CONTACTOc:"Mensaje",INFO_CONTACTOd:"O envie un mail a:",BOTON_CONTACTO:"ENVIAR"}),e.translations("en",{INICIO:"Start",TITULO_DATOS:"Get Around. Visit. Enjoy.",TITULO_FOOTER_TRANSPORTE:"*Transport is not included",PRECIO_TOTAL:"Total Price",MENU_ITEM1:"Start",MENU_ITEM2:"Your Bookings",MENU_ITEM3:"Contact",TITULO_PASO1:"DATE",TITULO_PASO2:"LANGUAGE",TITULO_PASO3:"NUMBER OF PEOPLE",TITULO_PASO4:"CHOOSE A WINERY",TITULO_PASO5:"CONFIRM YOUR BOOKING",TITULO_IMAGENES:"IMAGES",TITULO_BODEGA:"HISTORY",INFOBOX_DISTANCIA:"Please bear in mind the distance between wineries when planning your transportation.",INFOBOX_RECOMENDACION:"It is not advisable to book more than 4 wine tours per day.",INFOBOX_PAGOS:"You will be redirected to PayPal to finish your purchase. Thanks!",BOTON_CONTINUAR:"CONTINUE",CONTENIDO_PASO1:"mm.dd.yyyy",CONTENIDO_PASO2a:"spanish",CONTENIDO_PASO2b:"english",CONTENIDO_PASO3a:"adults",CONTENIDO_PASO3b:"children",INFOBOX_MENORES:"People under 18 years old can't participate at the tasting.",BOTON_ATRAS:"PREVIOUS",BOTON_ADELANTE:"NEXT",BOTON_CONFIRMAR:"CONFIRM",INFO_BODEGA_TITULO1:"Winery",INFO_BODEGA_TITULO2:"Tours",INFO_BODEGA_TITULO3:"Comments","INFO_BODEGA_DURACIÓN":"Duration",INFO_BODEGA_HORARIO:"Schedules",INFO_BODEGA_RESERVA:"RESERVE",INFO_DATOS_PERSONALES:"PERSONAL DATA",INFO_DATOS_PERSONALESa:"Full Name",INFO_DATOS_PERSONALESb:"Age",INFO_DATOS_PERSONALESc:"Nationality",INFO_DATOS_PERSONALESd:"Phone",INFO_DATOS_PERSONALESe:"Email",INFO_DATOS_PERSONALESf:"Payment Method",INFO_TOUR_RESERVADOa:"Booked Places",INFO_TOUR_RESERVADOb:"Tour Language",INFO_TOUR_RESERVADOc:"Duration",INFO_TOUR_VISTA_RESERVASa:"Language:",INFO_TOUR_VISTA_RESERVASb:"Places and Prices:",INFO_TOUR_VISTA_RESERVASc:"Subtotal:",TITULO_CONTACTO:"CONTACT",INFO_CONTACTOa:"Name and Surname",INFO_CONTACTOb:"E-Mail",INFO_CONTACTOc:"Message",INFO_CONTACTOd:"Or send an email to:",BOTON_CONTACTO:"SEND"}),e.translations("pt",{INICIO:"Começar",TITULO_DATOS:"Percorra. Conheça. Desfrute.",TITULO_FOOTER_TRANSPORTE:"*O serviço de traslado não está incluído.",PRECIO_TOTAL:"Preço Total ",MENU_ITEM1:"INICIO",MENU_ITEM2:"MINA RESERVAS",MENU_ITEM3:"CONTACTO",TITULO_PASO1:"ESCOLHA UMA DATA",TITULO_PASO2:"ESCOLHA O SEU IDIOMA",TITULO_PASO3:"INDIQUE O NÚMERO DE PESSOAS",TITULO_PASO4:"SELECIONE AS VINICOLAS",TITULO_PASO5:"CONFIRME SUA RESERVA",TITULO_IMAGENES:"IMÁGENES",TITULO_BODEGA:"HISTORIA",INFOBOX_DISTANCIA:"Por favor, verifique a distância entre as vinícolas e os meios de transporte que utilizará para os traslados.",INFOBOX_RECOMENDACION:"Recomenda-se NÃO fazer reservas em mais de 4 vinícolas por dia.",INFOBOX_PAGOS:"A seguir será redirecionado para o PayPal para concluir a compra. Obrigado!",BOTON_CONTINUAR:"CONTINUAR",CONTENIDO_PASO1:"dd.mm.aa",CONTENIDO_PASO2a:"espanhol",CONTENIDO_PASO2b:"inglês",CONTENIDO_PASO3a:"adultos",CONTENIDO_PASO3b:"menores",INFOBOX_MENORES:"menores de 18 anos não podem participar da degustação",BOTON_ATRAS:"ANTERIOR",BOTON_ADELANTE:"SEGUINTE",BOTON_CONFIRMAR:"CONFIRMAR",INFO_BODEGA_TITULO1:"Vinícola",INFO_BODEGA_TITULO2:"Tours",INFO_BODEGA_TITULO3:"Comentarios","INFO_BODEGA_DURACIÓN":"DURACAO",INFO_BODEGA_HORARIO:"SELECCIONE HORARIO",INFO_BODEGA_RESERVA:"RESERVAR",INFO_DATOS_PERSONALES:"DADOS PESSOAIS",INFO_DATOS_PERSONALESa:"Nome Completo",INFO_DATOS_PERSONALESb:"Idade",INFO_DATOS_PERSONALESc:"Local de Origem",INFO_DATOS_PERSONALESd:"Celular",INFO_DATOS_PERSONALESe:"Email",INFO_DATOS_PERSONALESf:"Método de Pago",INFO_TOUR_RESERVADOa:"Lugares Reservadas",INFO_TOUR_RESERVADOb:"Idioma do Passeio",INFO_TOUR_RESERVADOc:"Duração",INFO_TOUR_VISTA_RESERVASa:"Idioma:",INFO_TOUR_VISTA_RESERVASb:"Cupos y Precios:",INFO_TOUR_VISTA_RESERVASc:"Subtotal:",TITULO_CONTACTO:"CONTATO",INFO_CONTACTOa:"Nome Completo",INFO_CONTACTOb:"E-Mail",INFO_CONTACTOc:"Mensagem",INFO_CONTACTOd:"Ou envie um e-mail para:",BOTON_CONTACTO:"ENVIAR"}),e.useCookieStorage();var O=/[lg]=([^&#]*)/g;window.lg=window.location.search.search(O)>-1?O.exec(window.location.search)[1]:window.navigator.language.split("-")[0],e.preferredLanguage(lg),e.useSanitizeValueStrategy("escape")}),function(e){"use strict";var O={init:function(){this.initMenu()},initReserveFormData:function(){this.initDateDropper(),this.initDotOptions()},initResults:function(){this.initMap(),this.initSearch()},initDateDropper:function(){$(".datedropper").fdatepicker({format:"dd.mm.yyyy",startDate:new Date(Date.now()+864e5),language:"es"})},initDotOptions:function(){[].slice.call(document.querySelectorAll(".dotoptions > ul")).forEach(function(e){new DotNav(e,{callback:function(e){}})})},initMenu:function(){var e=document.querySelector(".menu-open-button"),O=e.querySelector(".menu-overlay"),a=document.querySelector(".menu-close-button");e.addEventListener("click",function(e){O.classList.add("open")}),a.addEventListener("click",function(e){e.stopPropagation(),O.classList.remove("open")})},initMap:function(){var O={center:{lat:-32.883333,lng:-68.816667},zoom:8};this.map=new google.maps.Map(document.querySelector(".map-container"),O),this.bounds=new google.maps.LatLngBounds,e.addEventListener("load",function(){google.maps.event.trigger(this.map,"resize"),this.map.setZoom(this.map.getZoom()),this.map.setCenter(this.map.getCenter())})},addWineryMarkers:function(e){e.forEach(function(e){var a=new google.maps.LatLng(e.Winery.latitude,e.Winery.longitude);O.markers[e.Winery.id]=new google.maps.Marker({position:a,map:O.map,title:e.Winery.name,icon:new google.maps.MarkerImage("/assets/img/marker-wineobs.png",null,null,null,new google.maps.Size(36,36)),visible:!1}),O.markers[e.Winery.id].addListener("mouseover",function(e){O.markers[e].setZIndex(9),document.querySelector('div[data-winery-id="'+e+'"]').parentNode.classList.add("highlight")}.bind(null,e.Winery.id)),O.markers[e.Winery.id].addListener("mouseout",function(e){O.markers[e].setZIndex(1),document.querySelector('div[data-winery-id="'+e+'"]').parentNode.classList.remove("highlight")}.bind(null,e.Winery.id)),O.markers[e.Winery.id].addListener("click",function(){}),O.bounds.extend(a)}),O.map.fitBounds(O.bounds)},initPaginator:function(){$(".wineries-paginator");$(".winery").on("click",".winery-buttons .icon-wineobs-pin",function(e){e.preventDefault();var a=this,n=a.getAttribute("data-winery-id");O.markers[n].setIcon(new google.maps.MarkerImage("/assets/img/marker-hover-wineobs.png",null,null,null,new google.maps.Size(36,36))),O.markers[n].setZIndex(google.maps.Marker.MAX_ZINDEX+1),O.map.panTo(O.markers[n].getPosition())});var e=[].slice.call(document.querySelectorAll(".winery-card-front .winery-button .wineobs-button"));e.forEach(function(e,O){e.addEventListener("click",function(O){e.parentNode.parentNode.parentNode.classList.add("flipped")})});var a=[].slice.call(document.querySelectorAll(".winery-card-back .winery-close"));a.forEach(function(e,O){e.addEventListener("click",function(O){e.parentNode.parentNode.classList.remove("flipped")})});var n=[].slice.call(document.querySelectorAll(".winery-icons .icon-wineobs-pin"));n.forEach(function(e,O){var a=e.parentNode.parentNode.parentNode.querySelector(".winery-card-top-mask");e.addEventListener("click",function(e){e.preventDefault(),a.classList.toggle("swipe-pin")})});var o=[].slice.call(document.querySelectorAll(".winery-icons .icon-wineobs-info")),i=document.querySelector("footer .modals .modal-info-winery");o.forEach(function(e,O){var a=i.querySelector(".close-modal");e.addEventListener("click",function(e){e.preventDefault(),i.classList.add("show")}),a.addEventListener("click",function(e){e.preventDefault(),i.classList.remove("show")})})},initSearch:function(){var e=document.querySelector(".wineries .search");if(e){var O=e.querySelector(".search-lens"),a=e.querySelector(".search-input input");O.addEventListener("click",function(O){O.preventDefault(),e.classList.add("active"),e.querySelector("input").focus()}),a.addEventListener("blur",function(O){O.preventDefault(),0===a.value.length&&e.classList.remove("active")})}},map:"",markers:[],reserveMarkers:new google.maps.MarkerImage("/assets/img/marker-reserve.png",new google.maps.Size(30,30),new google.maps.Point(0,0),new google.maps.Point(15,15),null)};e.Wineobs=O}(window);